# Разработка проекта

Проект разрабатывается на добровольной основе и всегда рад вашей помощи.  

Ошибку, идею и предложение можно зарегистрировать на странице [Issues](https://github.com/SeiOkami/AdvancedGlobalSearchOneS/issues).

Если же хочется поучаствовать в разработке, то данный файл подскажет что и как устроено.

## Требования к конфигурации использования

Расширение может работать на любой конфигурации. Если же конфигурация содержит объекты БСП, то расширение может учитывать их. На данный момент наличие БСП учитывается при проверке ролей и полноправности пользователя.

## Мультиязычность

Разработка ведется на русском языке, однако с поддержкой англоязычных конфигураций

- Все элементы интерфейса имеют синонимы на русском и английском
- Все текстовые сообщения переводятся через метод ФразаИнтерфейса(ТекстНаРусском). Метод использует словарь, расположенный в модуле РГП_ГлобальныйПоискКлиентСерверПовтИсп. При добавлении новой фразы необходимо проверять наличие перевода в словаре.
- `НСтр()` не используется сознательно, чтобы хранить все переводы в одном месте - модуле словаря. Чтобы не дублировать одинаковые переводы в разных участках кода. И для решения "особенности" метода, который возвращает пустую строку при отсутствии в сообщении текущего кода языка.
- При использовании функционала БСП необходимо учитывать и названия\методы\свойства "международной" версии
- Основная ветка содержит расширение с двумя языками, а в отдельных ветках релизов оставлен только один текущий язык. При этом изменяется только файл [Configuration.mdo](РасширенныйГлобальныйПоиск/src/Configuration/Configuration.mdo)
- Пытаемся соблюдать [Требования 1С по локализации](https://its.1c.ru/db/v8std/browse/13/-1/40)

## Среда разработки

- Последняя версия EDT
- Версия платформы указывается в файле [Configuration.mdo](https://github.com/SeiOkami/AdvancedGlobalSearchOneS/blob/develop/%D0%A0%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%D0%9F%D0%BE%D0%B8%D1%81%D0%BA/DT-INF/PROJECT.PMF)
- При выходе новой поддерживаемой в EDT версии платформы необходимо переводить ветку develop на неё.
- При смене версии платформы стоит учитывать особенности сборки релизов

## Сборка релизов

При компиляции файла расширения стоит учитывать, что предыдущие версии платформы не смогут его использовать. Например, расширение, скомпилированное в 8.3.23 не загружается в платформе 8.3.22. Поэтому при выпуске релиза стоит собирать его на разных версиях. На данный момент это:

- 8.3.22
- 8.3.23
- 8.3.24+

## Требование к конфигурации разработки

Для удобства разработки в качестве основного проекта стоит использовать проект [БСП](https://github.com/SeiOkami/OneS_ssl_ru), а именно его ветку [multi-language](https://github.com/SeiOkami/OneS_ssl_ru/tree/release/multi-language), в которой в дереве конфигурации добавлен английский язык с идентификатором, соответствующем международной версии БСП.  
Использование этого проекта позволит в IDE работать сразу с обоими языками.

Дополнительно стоит перепроверять работу на [международной версии БСП](https://github.com/SeiOkami/OneS_ssl_eng).

Для компилирования релизов других версий платформы стоит использовать соответствующие ветки проекта БСП.

## Контроль качества кода

- Проект разрабатывается на [строгой типизации EDT](https://github.com/1C-Company/v8-code-style/blob/master/docs/checks/code_typification.md).
- Для анализа качества кода используется встроенные в EDT проверки.
- Дополнительно используются проверки [BSL Language Server](https://1c-syntax.github.io/bsl-language-server/) в локальном SonarQube
- [Файл настроек Sonar](РасширенныйГлобальныйПоиск/sonar-project.properties)
- [Конфигурационный файл настроек BSL LS](РасширенныйГлобальныйПоиск/.bsl-language-server.json)

При возникновении необходимости "подавить" какую-то ошибку стоит делать это в коде комментарием с обоснованием. Со временем такие замечания будут пересматриваться (и исправляться если это, например, баги ЕДТ)

## Тестирование

- В качестве движка модульного тестирования используется [YaxUnit](https://github.com/bia-technologies/yaxunit)
- Все тесты содержатся в расширении [РасширенныйГлобальныйПоиск.Тестирование](РасширенныйГлобальныйПоиск.Тестирование/)
- При разработке функционала необходимо поддерживать существующие тесты в актуальном и рабочем состоянии
- При разработке нового функционала стоит по возможности добавлять новые тесты
